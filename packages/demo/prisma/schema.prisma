generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["views"]
}

generator pothos {
  provider = "prisma-pothos-types"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model sessions {
  id                    BigInt   @id @default(autoincrement())
  user_id               BigInt
  birth_time            DateTime @default(now()) @db.Timestamptz(6)
  hashed_secret         Bytes
  user_agent_seen_first String
  row_start             DateTime @default(dbgenerated("transaction_timestamp()")) @db.Timestamptz(6)
  row_end               DateTime @default(dbgenerated("'infinity'::timestamp with time zone")) @db.Timestamptz(6)
  users                 users    @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model users {
  id              BigInt     @id @default(autoincrement())
  username        String
  hashed_password String
  creation_time   DateTime   @default(now()) @db.Timestamptz(6)
  row_start       DateTime   @default(dbgenerated("transaction_timestamp()")) @db.Timestamptz(6)
  row_end         DateTime   @default(dbgenerated("'infinity'::timestamp with time zone")) @db.Timestamptz(6)
  sessions        sessions[]
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model sessions_history {
  id                    BigInt
  user_id               BigInt
  birth_time            DateTime @db.Timestamptz(6)
  hashed_secret         Bytes
  user_agent_seen_first String
  row_start             DateTime @db.Timestamptz(6)
  row_end               DateTime @db.Timestamptz(6)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model users_history {
  id              BigInt
  username        String
  hashed_password String
  creation_time   DateTime @db.Timestamptz(6)
  row_start       DateTime @db.Timestamptz(6)
  row_end         DateTime @db.Timestamptz(6)

  @@ignore
}

view sessions_view {
  id                    BigInt    @unique
  user_id               BigInt
  birth_time            DateTime  @db.Timestamptz(6)
  hashed_secret         Bytes
  user_agent_seen_first String
  row_start             DateTime? @db.Timestamptz(6)
  row_end               DateTime? @db.Timestamptz(6)
  username              String
}

/// The underlying view does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
view sessions_with_history {
  id                    BigInt?
  user_id               BigInt?
  birth_time            DateTime? @db.Timestamptz(6)
  hashed_secret         Bytes?
  user_agent_seen_first String?
  row_start             DateTime? @db.Timestamptz(6)
  row_end               DateTime? @db.Timestamptz(6)

  @@ignore
}

/// The underlying view does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
view users_with_history {
  id              BigInt?
  username        String?
  hashed_password String?
  creation_time   DateTime? @db.Timestamptz(6)
  row_start       DateTime? @db.Timestamptz(6)
  row_end         DateTime? @db.Timestamptz(6)

  @@ignore
}
